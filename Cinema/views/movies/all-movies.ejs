
<%- include('../includes/movies-header.ejs') %>
<% if(movies && movies.length > 0) {%>
        <% movies.forEach(movie => { %>
            <div class="container bordered">
                <h3><%= movie.name %>, <%= movie.premiered.getFullYear() %></h3>
                <p> Genres: <%= movie.genres.join(', ') %></p>
                <div class="movie-grid">
                    <div class="movie-image">
                        <img src="<%= movie.image %>" alt="<%= movie.name %>">
                    </div>
                    <div class="movie-subscription bordered">
                        <p>Subscription Watched:</p>
                        <ul>
                            <% movie.subscriptions.forEach(sub => { %>
                                <!-- <li><%= sub.memberId.name %></li> -->
                                <li> <a href="/members/<%= sub.memberId._id %>"><%= sub.memberId.name %></a>, <%= sub.movies[0].date.split("T")[0] %></li>
                            <% }) %>
                        </ul>
                    </div>
                </div>
                <div><button onclick="location.href = '/movies/edit-movie/<%= movie._id %>';">Edit</button>  <button onclick="deleteMovie('<%= movie._id %>')">Delete</button>
                   </div>

            </div>
            <% }) %>

<% }else {%>
    <h3>No movies to display</h3>
<% } %>


    </main>


    
  <script src="/js/movies.js"></script>
<%- include('../includes/end.ejs') %>